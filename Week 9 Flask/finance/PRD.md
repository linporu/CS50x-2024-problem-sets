# 產品需求文件（PRD）

## 1. 產品概述
這是一個股票交易網站，目標是提供使用者方便的股票交易和管理功能。

## 2. 目標受眾
目標受眾是對股票交易有興趣的投資者，主要集中在20-50歲之間。

## 3. 功能需求

### 3.1 註冊（register）
- 使用者可以透過表單註冊帳號。
- 使用者必須輸入用戶名（username），若輸入為空或用戶名已存在，顯示錯誤訊息。
- 使用者必須輸入密碼（password）並再次確認密碼（confirmation），若輸入為空或密碼不匹配，顯示錯誤訊息。
- 使用POST方法提交使用者輸入至/register。
- 將新使用者插入users資料表，儲存密碼的雜湊值（hash），而非密碼本身。
- 需要建立新的模板（例如：register.html），類似於login.html。
- 成功註冊後，使用者應能夠登入並查看其資料。

### 3.2 查詢股票報價（quote）
- 使用者可以查詢股票的當前價格。
- 使用者必須輸入股票代號（symbol），若輸入為空，顯示錯誤訊息。
- 使用POST方法提交使用者輸入至/quote。
- 需要建立兩個新的模板（例如：quote.html和quoted.html）。當使用者透過GET方法訪問/quote時，顯示包含提交表單的模板。當使用者透過POST方法提交表單時，顯示包含查詢結果的模板。

### 3.3 購買股票（buy）
- 使用者可以購買股票。
- 使用者必須輸入股票代號（symbol），若輸入為空或代號不存在，顯示錯誤訊息。
- 使用者必須輸入購買的股數（shares），若輸入不是正整數，顯示錯誤訊息。
- 使用POST方法提交使用者輸入至/buy。
- 完成後，重定向使用者至首頁。
- 查詢使用者當前的現金餘額。
- 在finance.db中新增一個或多個資料表以記錄購買資訊，確保能夠追蹤誰在何時以何價格購買了什麼。
- 若使用者無法負擔當前價格的股數，顯示錯誤訊息並取消購買。

### 3.4 顯示持股（index）
- 顯示當前登入使用者的持股情況，包括股票代號、持有股數、當前價格和總價值（股數乘以價格）。
- 顯示使用者的現金餘額和總資產（股票總價值加現金）。
- 需要執行多個SELECT查詢，可能需要使用GROUP BY、HAVING SUM和/或WHERE。

### 3.5 賣出股票（sell）
- 使用者可以賣出持有的股票。
- 使用者必須選擇股票代號（symbol），若未選擇或不持有該股票，顯示錯誤訊息。
- 使用者必須輸入賣出的股數（shares），若輸入不是正整數或持有股數不足，顯示錯誤訊息。
- 使用POST方法提交使用者輸入至/sell。
- 完成後，重定向使用者至首頁。

### 3.6 交易歷史（history）
- 顯示使用者所有的交易歷史，包括每筆交易的股票代號、價格、股數和交易時間。
- 需要修改或新增資料表以記錄交易歷史，盡量減少冗餘。

### 3.7 個人化功能（personal touch）
- 允許使用者更改密碼。
- 允許使用者增加帳戶現金。
- 允許使用者在index頁面直接購買或賣出股票，而不需手動輸入股票代號。
- 實現其他相似範圍的功能。

## 4. 用戶故事
- 作為一個使用者，我希望能夠註冊帳號，以便進行股票交易。
- 作為一個使用者，我希望能夠查詢股票價格，以便做出投資決策。
- 作為一個使用者，我希望能夠購買股票，以便進行投資。
- 作為一個使用者，我希望能夠查看我的持股情況，以便了解我的投資組合。
- 作為一個使用者，我希望能夠賣出股票，以便實現收益或止損。
- 作為一個使用者，我希望能夠查看我的交易歷史，以便追蹤我的投資活動。

---

## 5. 流程圖
（此處應包含流程圖）

## 6. 介面設計
（此處應包含介面設計草圖）

## 7. 技術需求
- 前端：HTML, CSS, JavaScript
- 後端：Python, Flask
- 資料庫：SQLite

## 8. 時程表
- 第1週：需求分析
- 第2-4週：前端開發
- 第5-7週：後端開發
- 第8週：測試和上線

## 9. 其他需求
- 安全性：使用SSL加密
- 性能：支持高並發